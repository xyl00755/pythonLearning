{"issue":{"id":5044,"project":{"id":39,"name":"\u4e39\u9732web\u9879\u76ee\u95ee\u9898\u7ba1\u7406"},"tracker":{"id":1,"name":"\u9519\u8bef"},"status":{"id":5,"name":"\u5df2\u5173\u95ed"},"priority":{"id":4,"name":"\u7d27\u6025"},"author":{"id":168,"name":"guo caihua"},"assigned_to":{"id":41,"name":"\u4ebf\u838e \u5218"},"subject":"\u3010\u63a5\u53e3\u6d4b\u8bd5\u3011dlgoods\u7684\u63a5\u53e3updateGoodsSpecialPriceCacheBuyerLevel\u6839\u672c\u65e0\u6cd5\u771f\u6b63\u66f4\u65b0\u5546\u54c1\u7279\u7ea6\u4ef7\u7f13\u5b58\u7684\u4e70\u5bb6\u7ea7\u522b","description":"\u3010\u6d4b\u8bd5\u65f6\u95f4\u3011\r\n2016-06-14\r\n\r\n\u3010\u6d4b\u8bd5\u73af\u5883\u3011\r\n\u5fae\u670d\u52a1\uff1adlgoods\r\n\r\n\u3010\u6d4b\u8bd5\u524d\u63d0\u3011\r\n\r\n\u3010\u6d4b\u8bd5\u6b65\u9aa4\u3011\r\n\u63a5\u53e3\u6d4b\u8bd5\r\n\r\n\u3010\u9884\u671f\u7ed3\u679c\u3011\r\ncase pass\r\n\r\n\u3010\u5b9e\u9645\u7ed3\u679c\u3011\r\ncase fail\r\n\r\n\u3010\u539f\u56e0\u5206\u6790\u3011\r\nupdateGoodsSpecialPriceCacheBuyerLevel\u4e2d\u5305\u542b\u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u3002\u5f53paramBuyerId\u4e3anull\u65f6\u629b\u7a7a\u6307\u9488\uff0c\u5f53paramBuyerId\u4e0d\u4e3anull\u7684\u65f6\u5019buyerId\u4e3anull\uff0c\u6240\u4ee5\u4e0b\u9762\u771f\u6b63\u53bb\u66f4\u65b0\u7f13\u5b58\u4e2d\u4fe1\u606f\u7684\u64cd\u4f5c\u6839\u672c\u4e0d\u4f1a\u6267\u884c\u3002\r\nObject paramBuyerId = params.get(\"buyerId\");\r\nObject paramBuyerLevel = params.get(\"buyerLevel\");\r\nString buyerId = \"\";\r\nInteger buyerLevel = null;\r\nif (paramBuyerId == null) {\r\n    buyerId = paramBuyerId.toString();\r\n    }\r\nif (paramBuyerLevel == null) {\r\n    buyerLevel = Integer.valueOf(paramBuyerLevel.toString());\r\n    }\r\nif (buyerId.isEmpty()) {\r\n    // \u4e0d\u5b58\u5728\u8fd4\u56de\r\n    return serviceResult;\r\n    }\r\n     // \u5217\u8868\u505a\u6210\r\nList<DlGoodsSpecialPriceDTO> levelList = new ArrayList<DlGoodsSpecialPriceDTO>();\r\nfor (DlGoodsEntity entity : goodsIdList) {\r\n     DlGoodsSpecialPriceDTO dto = new DlGoodsSpecialPriceDTO();\r\n     dto.setGoodsId(entity.getGoodsId());\r\n     dto.setBuyerId(buyerId);\r\n     dto.setBuyerLevel(buyerLevel);\r\n     levelList.add(dto);\r\n     }\r\nboolean result = updateGoodsSpecialPriceCacheBuyerLevel(levelList);","start_date":"2016-06-14","due_date":"2016-06-17","done_ratio":0,"spent_hours":0.0,"created_on":"2016-06-14T02:57:19Z","updated_on":"2016-06-16T02:28:38Z","closed_on":"2016-06-16T02:28:38Z","journals":[{"id":40875,"user":{"id":41,"name":"\u4ebf\u838e \u5218"},"notes":"","created_on":"2016-06-15T09:44:24Z","details":[{"property":"attr","name":"due_date","new_value":"2016-06-17"},{"property":"attr","name":"assigned_to_id","new_value":"41"},{"property":"attr","name":"priority_id","old_value":"11","new_value":"4"}]},{"id":40967,"user":{"id":1,"name":"Redmine Admin"},"notes":"dlmerchandise.git;\nuat_feature;\n764be5c701573e33371c080038823ea5ae3fa83e;\nsuzhe.jiang@dhc.com.cn;\n\ndlgoods-services/src/main/java/com/danlu/dlgoods/service/cache/impl/DlGoodsPriceInfoCacheAPIImpl.java\n","created_on":"2016-06-16T01:23:41Z","details":[]},{"id":40974,"user":{"id":99,"name":"jiang suzhe"},"notes":"1.\u65e0SQL\u811a\u672c\r\n2.bug\u4ea7\u751f\u539f\u56e0\uff1a\u5224\u7a7a\u903b\u8f91\u9519\u8bef","created_on":"2016-06-16T01:27:01Z","details":[{"property":"attr","name":"status_id","old_value":"1","new_value":"3"}]},{"id":40988,"user":{"id":41,"name":"\u4ebf\u838e \u5218"},"notes":"","created_on":"2016-06-16T02:04:13Z","details":[{"property":"attr","name":"status_id","old_value":"3","new_value":"8"}]},{"id":40997,"user":{"id":168,"name":"guo caihua"},"notes":"uat\u73af\u5883\u63a5\u53e3\u6d4b\u8bd5\u7528\u4f8b\u901a\u8fc7","created_on":"2016-06-16T02:26:04Z","details":[]},{"id":41000,"user":{"id":168,"name":"guo caihua"},"notes":"","created_on":"2016-06-16T02:28:38Z","details":[{"property":"attr","name":"status_id","old_value":"8","new_value":"5"}]}]}}